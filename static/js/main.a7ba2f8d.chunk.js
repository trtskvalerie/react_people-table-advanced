(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{20:function(e,t,a){},24:function(e,t,a){},25:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n,c=a(13),r=a.n(c),s=a(6),l=a(1),o=a(2);!function(e){e.Home="home",e.People="people"}(n||(n={}));a(20);var u,j,i=a(3),b=a(8),d=a(14),m=a(15),h=a(12),O=a.n(h),p=function(){var e=Object(m.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://mate-academy.github.io/react_people-table/api/people.json"));case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),x=(a(24),a(25),a(0)),f=function(){return Object(x.jsx)("div",{className:"Loader",children:Object(x.jsx)("div",{className:"Loader__content"})})},N=a(10),v=a(5),_=a.n(v);!function(e){e.Name="name",e.Sex="sex",e.Born="born",e.Died="died",e.MotherName="motherName",e.FatherName="fatherName"}(u||(u={})),function(e){e.Asc="asc",e.Desc="desc"}(j||(j={}));a(27),a(28),a(29);var g=function(e){var t=e.name,a=e.slug,n=e.sex,c=Object(s.c)(),r=Object(i.a)(c,1)[0];return Object(x.jsx)("a",{href:"#/people/".concat(a,"?").concat(r),className:_()("PersonName",{PersonName__male:"m"===n},{PersonName__female:"f"===n}),children:t})},P=function(e){var t=e.person,a=e.personSelected,n=t.mother,c=t.father;return Object(x.jsxs)("tr",{className:_()({"PersonRow--selected":t.slug===a}),children:[Object(x.jsx)("td",{children:Object(x.jsx)(g,{name:t.name,slug:t.slug,sex:t.sex})}),Object(x.jsx)("td",{children:t.sex}),Object(x.jsx)("td",{children:t.born}),Object(x.jsx)("td",{children:t.died}),Object(x.jsx)("td",{children:n?Object(x.jsx)(g,{name:n.name,slug:n.slug,sex:n.sex}):Object(x.jsx)("b",{children:"name"})}),Object(x.jsx)("td",{children:c?Object(x.jsx)(g,{name:c.name,slug:c.slug,sex:c.sex}):Object(x.jsx)("b",{children:"name"})})]})},S=function(e){var t=e.people,a=e.personSelected,n=e.searchParams,c=e.setSearchParams,r=Object(l.useState)(n.get("sortBy")||""),s=Object(i.a)(r,2),o=s[0],b=s[1],d=Object(l.useState)(n.get("sortOrder")||""),m=Object(i.a)(d,2),h=m[0],O=m[1],p=Object(l.useMemo)((function(){return function(e,t,a){return""===t?Object(N.a)(e):Object(N.a)(e).sort((function(e,n){switch(t){case u.Name:case u.Sex:return a===j.Asc?e[t].localeCompare(n[t]):n[t].localeCompare(e[t]);case u.Born:case u.Died:return a===j.Asc?e[t]-n[t]:n[t]-e[t];case u.MotherName:case u.FatherName:var c=e[t],r=n[t];return null===c&&null===r?0:null===c?a===j.Asc?1:-1:null===r?a===j.Asc?-1:1:a===j.Asc?c.localeCompare(r):r.localeCompare(c);default:return 0}}))}(t,o,h)}),[o,t,h]),f=function(e){o!==e?(b(e),O(j.Asc),n.set("sortOrder",j.Asc)):h===j.Desc?(O(j.Asc),n.set("sortOrder",j.Asc)):(O(j.Desc),n.set("sortOrder",j.Desc)),n.set("sortBy",e),c(n)};return Object(x.jsxs)("table",{className:"table is-bordered",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{className:_()("PeopleTable__header",{"PeopleTable__header--sorted":o===u.Name},{"PeopleTable__header--sorted-desc":o===u.Name&&h===j.Desc}),onClick:function(){return f(u.Name)},children:"Name"}),Object(x.jsx)("th",{className:_()("PeopleTable__header",{"PeopleTable__header--sorted":o===u.Sex},{"PeopleTable__header--sorted-desc":o===u.Sex&&h===j.Desc}),onClick:function(){return f(u.Sex)},children:"Sex"}),Object(x.jsx)("th",{className:_()("PeopleTable__header",{"PeopleTable__header--sorted":o===u.Born},{"PeopleTable__header--sorted-desc":o===u.Born&&h===j.Desc}),onClick:function(){return f(u.Born)},children:"Born"}),Object(x.jsx)("th",{className:_()("PeopleTable__header",{"PeopleTable__header--sorted":o===u.Died},{"PeopleTable__header--sorted-desc":o===u.Died&&h===j.Desc}),onClick:function(){return f(u.Died)},children:"Died"}),Object(x.jsx)("th",{className:_()("PeopleTable__header",{"PeopleTable__header--sorted":o===u.MotherName},{"PeopleTable__header--sorted-desc":o===u.MotherName&&h===j.Desc}),onClick:function(){return f(u.MotherName)},children:"Mother's name"}),Object(x.jsx)("th",{className:_()("PeopleTable__header",{"PeopleTable__header--sorted":o===u.FatherName},{"PeopleTable__header--sorted-desc":o===u.FatherName&&h===j.Desc}),onClick:function(){return f(u.FatherName)},children:"Father's name"})]})}),Object(x.jsx)("tbody",{children:p.map((function(e){return Object(x.jsx)(P,{person:e,personSelected:a},e.slug)}))})]})},C=(a(30),1400),D=(new Date).getFullYear(),F=function(e){var t=e.people,a=e.setPeople,n=Object(l.useState)(!1),c=Object(i.a)(n,2),r=c[0],u=c[1],j=Object(s.c)(),d=Object(i.a)(j,1)[0],m=Object(l.useState)(""),h=Object(i.a)(m,2),O=h[0],p=h[1],f=Object(l.useState)("m"),v=Object(i.a)(f,2),g=v[0],P=v[1],S=Object(l.useState)(C),F=Object(i.a)(S,2),T=F[0],w=F[1],y=Object(l.useState)(C),A=Object(i.a)(y,2),k=A[0],M=A[1],B=Object(l.useState)(""),L=Object(i.a)(B,2),H=L[0],E=L[1],q=Object(l.useState)(""),J=Object(i.a)(q,2),z=J[0],I=J[1],R=Object(l.useState)(!1),Y=Object(i.a)(R,2),Z=Y[0],G=Y[1],K=Object(l.useMemo)((function(){return t.filter((function(e){return"f"===e.sex&&e.died>=T}))}),[t,T]),Q=Object(l.useMemo)((function(){return t.filter((function(e){return"m"===e.sex&&e.died>=T}))}),[t,T]);return r?Object(x.jsx)(o.a,{to:"/people?".concat(d)}):Object(x.jsxs)("form",{action:"/",className:"NewPerson",onSubmit:function(e){e.preventDefault();var t=k-T;if(t<0||t>150)G(!0);else{var n={name:O,sex:g,born:T,died:k,motherName:H||null,fatherName:z||null,slug:"".concat(O.toLowerCase().replace(" ","-"),"-").concat(T)};a((function(e){return[].concat(Object(N.a)(e),[Object(b.a)(Object(b.a)({},n),{},{mother:e.find((function(e){return e.name===n.motherName}))||null,father:e.find((function(e){return e.name===n.fatherName}))||null})])})),u(!0)}},children:[Object(x.jsx)("label",{htmlFor:"name",className:"label",children:"Name:"}),Object(x.jsx)("input",{type:"text",className:"input",id:"name",placeholder:"Enter name",value:O,onChange:function(e){return p(e.target.value.replace(/[^a-zA-Z ]/g,""))},required:!0}),Object(x.jsx)("p",{className:"label",children:"Sex:"}),Object(x.jsxs)("div",{className:"sex-container",children:[Object(x.jsxs)("label",{htmlFor:"male",className:"radio",children:[Object(x.jsx)("input",{type:"radio",id:"male",name:"sex",checked:"m"===g,onChange:function(){return P("m")}}),"Male"]}),Object(x.jsxs)("label",{htmlFor:"female",className:"radio",children:[Object(x.jsx)("input",{type:"radio",id:"female",name:"sex",checked:"f"===g,onChange:function(){return P("f")}}),"Female"]})]}),Object(x.jsx)("label",{htmlFor:"born",className:"label",children:"Born"}),Object(x.jsx)("input",{type:"number",className:_()("input",{"input--invalid":Z}),min:C,max:D,value:T,onChange:function(e){G(!1),w(+e.target.value)}}),Object(x.jsx)("label",{htmlFor:"died",className:"label",children:"Died"}),Object(x.jsx)("input",{type:"number",className:_()("input",{"input--invalid":Z}),min:C,max:D,value:k,onChange:function(e){G(!1),M(+e.target.value)}}),Object(x.jsx)("label",{htmlFor:"mother",className:"label",children:"Mother:"}),Object(x.jsxs)("select",{name:"mother",id:"mother",className:"select",value:H,onChange:function(e){return E(e.target.value)},children:[Object(x.jsx)("option",{value:"",children:"Select a mother"}),K.map((function(e){return Object(x.jsx)("option",{value:e.name,children:e.name},e.slug)}))]}),Object(x.jsx)("label",{htmlFor:"father",className:"label",children:"Father:"}),Object(x.jsxs)("select",{name:"father",id:"father",className:"select",value:z,onChange:function(e){return I(e.target.value)},children:[Object(x.jsx)("option",{value:"",children:"Select a father"}),Q.map((function(e){return Object(x.jsx)("option",{value:e.name,children:e.name},e.slug)}))]}),Object(x.jsx)("button",{type:"submit",className:"button",children:"Add person"})]})},T=function(e,t){var a=t.toLowerCase();return e.filter((function(e){var t,n;return e.name.toLowerCase().includes(a)||(null===(t=e.motherName)||void 0===t?void 0:t.toLowerCase().includes(a))||(null===(n=e.fatherName)||void 0===n?void 0:n.toLowerCase().includes(a))}))},w=function(e){var t=e.edit,a=Object(l.useState)([]),n=Object(i.a)(a,2),c=n[0],r=n[1],u=Object(l.useState)([]),j=Object(i.a)(u,2),m=j[0],h=j[1],O=Object(l.useState)(!0),N=Object(i.a)(O,2),v=N[0],_=N[1],g=Object(s.c)({}),P=Object(i.a)(g,2),C=P[0],D=P[1],w=Object(l.useState)(C.get("query")||""),y=Object(i.a)(w,2),A=y[0],k=y[1],M=Object(l.useState)(A),B=Object(i.a)(M,2),L=B[0],H=B[1],E=Object(o.h)().personSelected,q=void 0===E?"":E,J=Object(l.useMemo)((function(){return t?Object(x.jsx)(F,{people:c,setPeople:r}):Object(x.jsx)("a",{href:"#/people/new?".concat(C),className:"button add-button",children:"Add person"})}),[t,C]),z=Object(l.useCallback)(Object(d.debounce)((function(e){H(e),C.set("query",e),D(C)}),500),[t,C,q]);return Object(l.useEffect)((function(){p().then((function(e){return function(e){return e.map((function(t){return Object(b.a)(Object(b.a)({},t),{},{mother:e.find((function(e){return e.name===t.motherName}))||null,father:e.find((function(e){return e.name===t.fatherName}))||null})}))}(e)})).then((function(e){var t=T(e,L);r(e),h(t),_(!1)}))}),[]),Object(l.useEffect)((function(){var e=T(c,L);h(e)}),[L,c]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h1",{className:"title",children:"People table"}),Object(x.jsx)("div",{className:"container",children:v?Object(x.jsx)(f,{}):Object(x.jsxs)(x.Fragment,{children:[J,Object(x.jsx)("input",{type:"text",className:"input",placeholder:"Search",value:A,onChange:function(e){k(e.target.value),z(e.target.value)}}),Object(x.jsx)(S,{people:m,personSelected:q,searchParams:C,setSearchParams:D})]})})]})},y=function(){return Object(x.jsx)("h1",{className:"title",children:"Page not found"})},A=function(){return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)("header",{children:Object(x.jsxs)("nav",{className:"navbar",children:[Object(x.jsx)(s.b,{to:"/".concat(n.Home),className:"navbar-item",children:"Home"}),Object(x.jsx)(s.b,{to:"/".concat(n.People),className:"navbar-item",children:"People"})]})}),Object(x.jsxs)(o.d,{children:[Object(x.jsx)(o.b,{path:"/",element:Object(x.jsx)("h1",{className:"title",children:"Home page"})}),Object(x.jsx)(o.b,{path:n.Home,element:Object(x.jsx)(o.a,{to:"/",replace:!0})}),Object(x.jsx)(o.b,{path:"".concat(n.People,"/new"),element:Object(x.jsx)(w,{edit:!0})}),Object(x.jsx)(o.b,{path:"".concat(n.People,"/:personSelected"),element:Object(x.jsx)(w,{edit:!1})}),Object(x.jsx)(o.b,{path:n.People,element:Object(x.jsx)(w,{edit:!1})}),Object(x.jsx)(o.b,{path:"*",element:Object(x.jsx)(y,{})})]})]})};r.a.render(Object(x.jsx)(s.a,{children:Object(x.jsx)(A,{})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.a7ba2f8d.chunk.js.map