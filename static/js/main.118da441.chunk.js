(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{20:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a,c=n(13),r=n.n(c),s=n(6),l=n(0),o=n(2);!function(e){e.Home="home",e.People="people"}(a||(a={}));n(20);var j,u=n(3),i=n(12),b=n(14),d=n(15),h=n(10),m=n.n(h),O=function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://mate-academy.github.io/react_people-table/api/people.json"));case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),p=n(11),x=n(5),f=n.n(x);!function(e){e.Name="name",e.Sex="sex",e.Born="born",e.Died="died",e.MotherName="motherName",e.FatherName="fatherName"}(j||(j={}));n(24),n(25),n(26);var N=n(1),v=function(e){var t=e.name,n=e.slug,a=e.sex,c=Object(s.c)(),r=Object(u.a)(c,1)[0];return Object(N.jsx)("a",{href:"#/people/".concat(n,"?").concat(r),className:f()("PersonName",{PersonName__male:"m"===a},{PersonName__female:"f"===a}),children:t})},_=function(e){var t=e.person,n=e.personSelected,a=t.mother,c=t.father;return Object(N.jsxs)("tr",{className:f()({"PersonRow--selected":t.slug===n}),children:[Object(N.jsx)("td",{children:Object(N.jsx)(v,{name:t.name,slug:t.slug,sex:t.sex})}),Object(N.jsx)("td",{children:t.sex}),Object(N.jsx)("td",{children:t.born}),Object(N.jsx)("td",{children:t.died}),Object(N.jsx)("td",{children:a?Object(N.jsx)(v,{name:a.name,slug:a.slug,sex:a.sex}):Object(N.jsx)("b",{children:"name"})}),Object(N.jsx)("td",{children:c?Object(N.jsx)(v,{name:c.name,slug:c.slug,sex:c.sex}):Object(N.jsx)("b",{children:"name"})})]})},P=function(e){var t=e.people,n=e.personSelected,a=e.searchParams,c=e.setSearchParams,r=Object(l.useState)(a.get("sortBy")||""),s=Object(u.a)(r,2),o=s[0],i=s[1],b=Object(l.useMemo)((function(){return function(e,t){return""===t?Object(p.a)(e):Object(p.a)(e).sort((function(e,n){switch(t){case j.Name:case j.Sex:return e[t].localeCompare(n[t]);case j.Born:case j.Died:return e[t]-n[t];case j.MotherName:case j.FatherName:var a=e[t],c=n[t];return null===a&&null===c?0:null===a?1:null===c?-1:a.localeCompare(c);default:return 0}}))}(t,o)}),[o,t]),d=function(e){i(e),a.set("sortBy",e),c(a)};return Object(N.jsxs)("table",{className:"table is-bordered",children:[Object(N.jsx)("thead",{children:Object(N.jsxs)("tr",{children:[Object(N.jsx)("th",{className:f()("PeopleTable__header",{"PeopleTable__header--sorted":o===j.Name}),onClick:function(){return d(j.Name)},children:"Name"}),Object(N.jsx)("th",{className:f()("PeopleTable__header",{"PeopleTable__header--sorted":o===j.Sex}),onClick:function(){return d(j.Sex)},children:"Sex"}),Object(N.jsx)("th",{className:f()("PeopleTable__header",{"PeopleTable__header--sorted":o===j.Born}),onClick:function(){return d(j.Born)},children:"Born"}),Object(N.jsx)("th",{className:f()("PeopleTable__header",{"PeopleTable__header--sorted":o===j.Died}),onClick:function(){return d(j.Died)},children:"Died"}),Object(N.jsx)("th",{className:f()("PeopleTable__header",{"PeopleTable__header--sorted":o===j.MotherName}),onClick:function(){return d(j.MotherName)},children:"Mother's name"}),Object(N.jsx)("th",{className:f()("PeopleTable__header",{"PeopleTable__header--sorted":o===j.FatherName}),onClick:function(){return d(j.FatherName)},children:"Father's name"})]})}),Object(N.jsx)("tbody",{children:b.map((function(e){return Object(N.jsx)(_,{person:e,personSelected:n},e.slug)}))})]})},g=(n(28),function(){return Object(N.jsx)("div",{className:"Loader",children:Object(N.jsx)("div",{className:"Loader__content"})})}),S=function(e,t){var n=t.toLowerCase();return e.filter((function(e){var t,a;return e.name.toLowerCase().includes(n)||(null===(t=e.motherName)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(a=e.fatherName)||void 0===a?void 0:a.toLowerCase().includes(n))}))},C=function(){var e=Object(l.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(l.useState)([]),r=Object(u.a)(c,2),j=r[0],d=r[1],h=Object(l.useState)(!0),m=Object(u.a)(h,2),p=m[0],x=m[1],f=Object(s.c)({}),v=Object(u.a)(f,2),_=v[0],C=v[1],T=Object(l.useState)(_.get("query")||""),k=Object(u.a)(T,2),w=k[0],y=k[1],B=Object(l.useState)(w),F=Object(u.a)(B,2),L=F[0],M=F[1],D=Object(o.h)().personSelected,H=void 0===D?"":D,E=Object(l.useCallback)(Object(b.debounce)((function(e){M(e),_.set("query",e),C(_)}),500),[_,H]);return Object(l.useEffect)((function(){O().then((function(e){return function(e){return e.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{mother:e.find((function(e){return e.name===t.motherName}))||null,father:e.find((function(e){return e.name===t.fatherName}))||null})}))}(e)})).then((function(e){var t=S(e,L);a(e),d(t),x(!1)}))}),[]),Object(l.useEffect)((function(){var e=S(n,L);d(e)}),[L]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("h1",{className:"title",children:"People table"}),Object(N.jsx)("div",{className:"container",children:p?Object(N.jsx)(g,{}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("input",{type:"text",className:"input",placeholder:"Search",value:w,onChange:function(e){y(e.target.value),E(e.target.value)}}),Object(N.jsx)(P,{people:j,personSelected:H,searchParams:_,setSearchParams:C})]})})]})},T=function(){return Object(N.jsx)("h1",{className:"title",children:"Page not found"})},k=function(){return Object(N.jsxs)("div",{className:"App",children:[Object(N.jsx)("header",{children:Object(N.jsxs)("nav",{className:"navbar",children:[Object(N.jsx)(s.b,{to:"/".concat(a.Home),className:"navbar-item",children:"Home"}),Object(N.jsx)(s.b,{to:"/".concat(a.People),className:"navbar-item",children:"People"})]})}),Object(N.jsxs)(o.d,{children:[Object(N.jsx)(o.b,{path:"/",element:Object(N.jsx)("h1",{className:"title",children:"Home page"})}),Object(N.jsx)(o.b,{path:a.Home,element:Object(N.jsx)(o.a,{to:"/",replace:!0})}),Object(N.jsx)(o.b,{path:"".concat(a.People,"/:personSelected"),element:Object(N.jsx)(C,{})}),Object(N.jsx)(o.b,{path:a.People,element:Object(N.jsx)(C,{})}),Object(N.jsx)(o.b,{path:"*",element:Object(N.jsx)(T,{})})]})]})};r.a.render(Object(N.jsx)(s.a,{children:Object(N.jsx)(k,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.118da441.chunk.js.map